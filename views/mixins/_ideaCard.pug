mixin ideaCard(idea)
    .card
        .idea_card
            .image(style=`background-image: linear-gradient(rgba(40, 40, 41, 0.85), rgba(40, 40, 41, 0.85)), url('/uploads/${idea.photo}')`)
                .user_info            
                    .avatar(style=`background-image: url('/uploads/${idea.author.photo}')`)
                    .user_info_text_container
                        a(href=`/users/${idea.author.id}`)
                            h2= idea.author.name
                        p.subtitle= idea.author.about
            .text_container
                a(href=`/ideas/${idea._id}`)
                    h1= idea.title
                p= idea.body.split(' ').slice(0, 150).join(' ')
                    a(href=`ideas/${idea._id}`).continue_reading continue reading..
            .icon_container
                form(action=`/api/ideas/${idea._id}/hearts` class="heartlist_form" method="POST").heart_form
                    - const heartStrings = idea.hearts.map(obj => obj.toString());
                    - const heartClass = heartStrings.includes(user._id.toString()) ? 'heart_active' : '';
                    button(type="submit" name="heart" class=`heart_idea ${heartClass}`).heart_idea
                        != helpers.icon('favorite')
                    p #{idea.hearts.length}
                form(action=`/api/ideas/${idea._id}/readinglist` class="readinglist_form" method="POST")
                    - const readingListStrings = user.readingList.map(obj => obj.toString());
                    - const readingListClass = readingListStrings.includes(idea._id.toString()) ? 'add_to_reading_list_remove' : 'add_to_reading_list_active';
                    button(type="submit" name="addToReadingList")
                        .add_to_reading_list(class=readingListClass)